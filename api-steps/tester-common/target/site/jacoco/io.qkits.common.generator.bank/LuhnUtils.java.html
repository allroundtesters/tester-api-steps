<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LuhnUtils.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">tester-common</a> &gt; <a href="index.source.html" class="el_package">io.qkits.common.generator.bank</a> &gt; <span class="el_source">LuhnUtils.java</span></div><h1>LuhnUtils.java</h1><pre class="source lang-java linenums">package io.qkits.common.generator.bank;

/**
 * &lt;pre&gt;
 * Luhn算法工具类
 * Created by Binary Wang on 2018/3/22.
 * &lt;/pre&gt;
 *
 * @author &lt;a href=&quot;https://github.com/binarywang&quot;&gt;Binary Wang&lt;/a&gt;
 */
<span class="nc" id="L11">public class LuhnUtils {</span>
    /**
     * 从不含校验位的银行卡卡号采用 Luhn 校验算法获得校验位
     * 该校验的过程：
     * 1、从卡号最后一位数字开始，逆向将奇数位(1、3、5等等)相加。
     * 2、从卡号最后一位数字开始，逆向将偶数位数字，先乘以2（如果乘积为两位数，则将其减去9），再求和。
     * 3、将奇数位总和加上偶数位总和，结果应该可以被10整除。
     */
    public static int getLuhnSum(char[] chs) {
<span class="nc" id="L20">        int luhnSum = 0;</span>
<span class="nc bnc" id="L21" title="All 2 branches missed.">        for (int i = chs.length - 1, j = 0; i &gt;= 0; i--, j++) {</span>
<span class="nc" id="L22">            int k = chs[i] - '0';</span>
<span class="nc bnc" id="L23" title="All 2 branches missed.">            if (j % 2 == 0) {</span>
<span class="nc" id="L24">                k *= 2;</span>
<span class="nc" id="L25">                k = k / 10 + k % 10;</span>
            }
<span class="nc" id="L27">            luhnSum += k;</span>
        }
<span class="nc" id="L29">        return luhnSum;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>